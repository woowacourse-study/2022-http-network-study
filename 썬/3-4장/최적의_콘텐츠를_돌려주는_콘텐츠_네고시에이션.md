# μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ… (Content Negotiation)

![img.png](images/googleSite.png)

`https://www.google.com`  
λ¶„λ… κµ¬κΈ€μ— μ ‘μ†ν–λ”λ° μ–΄λ–»κ² ν•κΈ€μ΄ λ‚μ¤μ§€? π¤” ν•΄ν‚Ή λ‹Ήν–λ‚...?  
λΌκ³  μƒκ°ν•  μ μκ² μ§€λ§, μ΄λ” `μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…(Content Negotiation)` λ•λ¬Έμ΄λ‹¤.

## μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…μ΄λ€?
κ°™μ€ μ½ν…μΈ (λ‚΄μ©)μ΄μ§€λ§ μ—¬λ¬ κ°μ νμ΄μ§€λ¥Ό μ§€λ‹ μ›Ήνμ΄μ§€κ°€ μλ‹¤. λ°©κΈ μ „κ³Ό κ°™μ€ μƒν™© (λ‚΄μ©μ€ κ°™μ§€λ§ μμ–΄ν/ν•κµ­μ–΄ν)μ²λΌ ν‘μ‹λλ” μ–Έμ–΄κ°€ μ„λ΅ λ‹¤λ¥Έ μ›Ήνμ΄μ§€μ κ²½μ°μ΄λ‹¤.

μ΄λ¬ν• μ›Ήνμ΄μ§€μ—μ„ μμ–΄μ™€ ν•κµ­μ–΄μ™€ κ°™μ΄ μ„λ΅ λ‹¤λ¥Έ μ–Έμ–΄λ¥Ό μ£Όλ΅ μ‚¬μ©ν•λ” λΈλΌμ°μ €κ°€ κ°™μ€ URIμ— μ•΅μ„Έμ¤ν•  λ•μ— κ°κ° μμ–΄ν μ›Ή νμ΄μ§€μ™€ ν•κµ­μ–΄ν μ›Ή νμ΄μ§€λ¥Ό ν‘μ‹ν•λ‹¤. μ΄μ™€ κ°™μ€ κµ¬μ΅°λ¥Ό `μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…`μ΄λΌ λ¶€λ¥Έλ‹¤.

μ½ν…μΈ (Content) - λ‚΄μ©  
λ„¤κ³ μ‹μ—μ΄μ…(Negotiation) - ν‘μƒ  

μ¦‰, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ κ³µν•λ” λ¦¬μ†μ¤μ λ‚΄μ©μ— λ€ν•΄ κµμ„­ν•λ‹¤λ” λ»μ΄λ©°, ν΄λΌμ΄μ–ΈνΈμ— λ”μ± μ ν•©ν• λ¦¬μ†μ¤λ¥Ό μ κ³µν•κΈ° μ„ν• κµ¬μ΅°μ΄λ‹¤.

## νλ‹¨ κΈ°μ¤€
λ‹¤μμ€ νλ‹¨ν•  λ•μ κΈ°μ¤€μ΄μ ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” ν‘ν„ μ”μ²­μ μΆ…λ¥μ΄λ‹¤.  
- Accept - ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” `λ―Έλ””μ–΄ νƒ€μ…` μ „λ‹¬
- Accept-Charset - ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” `λ¬Έμ` μΈμ½”λ”©
- Accept-Encoding - ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” `μ••μ¶•` μΈμ½”λ”©
- Accept-Language - ν΄λΌμ΄μ–ΈνΈκ°€ μ„ νΈν•λ” `μμ—° μ–Έμ–΄`
- Content-Language - μ„λ²„κ°€ λ³΄λ‚Έ μ‘λ‹µ

![img.png](images/beforeAcceptLanguage.png)  
ν•κµ­μ–΄ λΈλΌμ°μ €λ¥Ό μ‚¬μ©ν•κ³  μμμ—λ„ μ™Έκµ­μ— μλ” μ‚¬μ΄νΈλ¥Ό μ ‘μ†ν•λ©΄ μ„λ²„λ” μμ–΄λ΅ μ‘λ‹µν•λ‹¤.  

![img.png](images/afterAcceptLanguage.png)  
ν•κµ­μ–΄ λΈλΌμ°μ €λ¥Ό μ‚¬μ©ν•κ³  μμΌλ©° λ„¤κ³ μ‹μ—μ΄μ…μ΄ μ μ©λμ–΄ ν•κµ­μ–΄λ΅ μ‘λ‹µν•λ‹¤.  

![img.png](images/complicatedAcceptLanguage.png)  
<details> 
<summary>μ •λ‹µ</summary> 

κΈ°λ³Έ(default)μ΄ λ…μΌμ–΄λ΅ μ„¤μ •λμ–΄ μκΈ° λ•λ¬Έμ— λ…μΌμ–΄λ΅ μ‘λ‹µν•λ‹¤.
### λ§μ•½ μμ–΄λ΅ μ‘λ‹µλ°›κ³  μ‹¶λ‹¤λ©΄?
![img.png](images/qualityValues1.png)  
μ°μ„ μμ„λ¥Ό μ„¤μ •ν•΄μ„ μ²«λ²μ§Έ μ§€μ›ν•λ” μ–Έμ–΄κ°€ μ—†λ‹¤λ©΄ λ‘ λ²μ§Έ μ§€μ›ν•λ” μ–Έμ–΄λ΅ μ‘λ‹µμ„ μ¤€λ‹¤.
![img.png](images/complicatedAcceptLanguage-more.png)
</details>

![img.png](images/qualityValues2.png)  
![img.png](images/qualityValues3.png)

## λ„¤κ³ μ‹μ—μ΄μ… μΆ…λ¥

### μ„λ²„ κµ¬λ™ν• λ„¤κ³ μ‹μ—μ΄μ…(Server-driven Negotiation)
μ„λ²„ μΈ΅μ—μ„ μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…μ„ ν•λ” λ°©μ‹μ΄λ‹¤. μ„λ²„ μΈ΅μ—μ„ λ¦¬ν€μ¤νΈ ν—¤λ” ν•„λ“μ μ •λ³΄λ¥Ό μ°Έκ³ ν•΄μ„ μλ™μ μΌλ΅ μ²λ¦¬ν•λ‹¤. λ‹¤λ§, λΈλΌμ°μ €κ°€ λ³΄λ‚΄λ” μ •λ³΄λ¥Ό κ·Όκ±°λ΅ ν•κΈ° λ•λ¬Έμ— μ μ €μ—κ² μ •λ§ μ μ ν• κ²ƒμ΄ μ„ νƒλμ—λ‹¤κ³  ν•  μλ” μ—†λ‹¤.

λ‹¨μ :
- ν™•μ¥μ— μ©μ΄ν•μ§€ μ•λ‹¤.
  - κΈ°λ¥λ‹Ή ν•λ‚μ ν—¤λ”κ°€ ν•„μ”ν•λ°, μ¤ν¬λ¦° ν¬κΈ°λ‚ ν•΄μƒλ„ λ“±μ„ λ³€κ²½ν•λ ¤λ©΄ λλ‹¤λ¥Έ HTTP ν—¤λ”κ°€ ν•„μ”ν•λ‹¤.

### μ—μ΄μ „νΈ κµ¬λ™ν• λ„¤κ³ μ‹μ—μ΄μ…(Agent-driven Negotiation)
ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…μ„ ν•λ” λ°©μ‹μ΄λ‹¤. λΈλΌμ°μ €μ— ν‘μ‹λ μ„ νƒμ§€ μ¤‘μ—μ„ μ μ €κ°€ μλ™μΌλ΅ μ„ νƒν•λ‹¤.  
μ΄μ™Έμ—λ„ JavaScript λ“±μ„ μ‚¬μ©ν•΄ μ›Ή νμ΄μ§€μ—μ„ μλ™μ μΌλ΅ μ •ν•΄μ£Όλ” λ°©μ‹μ΄ μλ‹¤. μλ¥Ό λ“¤μ–΄, OSμ μΆ…λ¥λ‚ λΈλΌμ°μ €μ μΆ…λ¥ λ“±μ— μν•΄ PCμ© λλ” μ¤λ§νΈν°μ©μ μ›Ήνμ΄μ§€λ¥Ό μλ™μΌλ΅ μ „ν™ν•λ” κ²ƒμ΄ μ΄μ— ν•΄λ‹Ήν•λ‹¤.  
> ex) ν°μ—μ„ https://www.naver.com λ΅ μ ‘μ†ν•λ©΄?  
> https://m.naver.com μΌλ΅ μ „ν™

λ‹¨μ :
- HTTP ν‘μ¤€μ—μ„λ” μ‚¬μ© κ°€λ¥ν• λ¦¬μ†μ¤ μ¤‘, μ„ νƒν•  μ μλ” νμ΄μ§€ ν•μ‹μ„ μ§€μ •ν•μ§€ μ•μ•„ ν”„λ΅μ„Έμ¤λ¥Ό μλ™ν™”ν•  μ μ—†λ‹¤.
  - μ¦‰, κ±°μ ν•­μƒ μ¤ν¬λ¦½ν…, νΉν JavaScript λ¦¬λ””λ ‰μ…κ³Ό ν•¨κ» μ‚¬μ©λμ–΄μ•Ό ν•λ‹¤.
- μ‹¤μ  λ¦¬μ†μ¤λ¥Ό μ„ν•΄ μ”μ²­μ΄ ν•λ‚ λ” ν•„μ”ν•΄ μ†λ„ μ €ν•λ¥Ό μ•ΌκΈ°ν•λ‹¤.

### νΈλμ¤νμ–΄λ°νΈ λ„¤κ³ μ‹μ—μ΄μ…(Transparent Negotiation)
μ„λ²„ κµ¬λ™ν•κ³Ό μ—μ΄μ „νΈ κµ¬λ™ν•μ„ νΌν•©ν• κ²ƒμΌλ΅ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ κ°κ° μ½ν…μΈ  λ„¤κ³ μ‹μ—μ΄μ…μ„ ν•λ” λ°©μ‹μ΄λ‹¤.

## κ·Έλμ„ μ”μ¦ μ¶”μ„Έλ”?
μ‹¤μ λ΅ μ„λ²„ μΈ΅ ν‘μƒμ—μ„λ” κ³ κ°μ κΈ°λ€μ— λ€ν•΄ λ§μ€ κ°€μ •μ„ ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ— **λ§μ€ ν™μ©λ„λ¥Ό μ°Ύμ„ μ μ—†λ‹¤.**

ν΄λΌμ΄μ–ΈνΈ μ»¨ν…μ¤νΈλ‚ ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–»κ² λ¦¬μ†μ¤ ν‘ν„μ„ μ‚¬μ©ν•  μ§€μ— λ€ν•΄ μ μ¶”ν•κΈ°λ€ κ±°μ λ¶κ°€λ¥ν•λ‹¤. λν• μ„λ²„ κΈ°λ° ν‘μƒμ€ μ„λ²„ μΈ΅ μ½”λ“λ¥Ό λ¶ν•„μ”ν•κ² λ” λ³µμ΅ν•κ² ν•λ‹¤. λ”°λΌμ„ λ€λ¶€λ¶„μ REST API κµ¬ν„μ€ μ—μ΄μ „νΈ κµ¬λ™ν• λ„¤κ³ μ‹μ—μ΄μ…μ— μμ΅΄ν•λ‹¤. μ—μ΄μ „νΈ κµ¬λ™ν• λ„¤κ³ μ‹μ—μ΄μ…μ€ HTTP μ”μ²­ ν—¤λ” λλ” λ¦¬μ†μ¤ URI ν¨ν„΄μ μ‚¬μ©μ— λ”°λΌ λ‹¬λΌμ§‘λ‹λ‹¤.

## μ°Έκ³ 
- https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC
- https://restfulapi.net/content-negotiation/
